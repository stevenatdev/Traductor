<app-navbar></app-navbar>
<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-title>Lista de Usuarios</ion-title>
      <ion-buttons slot="end">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large">Usuarios</ion-title>
      </ion-toolbar>
    </ion-header>

    <!-- Botón para agregar un nuevo usuario -->
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button routerLink="/admin/user/nuevo">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <!-- Tabla para listar los usuarios -->
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <ion-card>
            <ion-card-content>
              <!-- Tabla HTML tradicional para evitar deformaciones -->
              <table class="usuarios-table" style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr class="">
                    <th [style]="{ 'text-align': 'start' }">Cédula</th>
                    <th [style]="{ 'text-align': 'start' }">Nombre</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Fila por cada usuario -->
                  @for (usuario of usuarios; track $index) {
                  <tr>
                    <td>{{ usuario.cedula }}</td>
                    <td>{{ usuario.nombre }}</td>
                    <td class="flex justify-end">
                      <!-- Botones de acciones (Editar, Eliminar) -->
                      <ion-button size="small" color="primary" routerLink="/admin/user/{{ usuario.id }}">
                        <ion-icon slot="start" name="create"></ion-icon>
                      </ion-button>

                      <ion-button size="small" color="danger" (click)="eliminarUsuario(usuario.id)">
                        <ion-icon slot="start" name="trash"></ion-icon>
                      </ion-button>
                    </td>
                  </tr>
                  }
                </tbody>
              </table>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
</div>